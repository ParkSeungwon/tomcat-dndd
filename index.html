<html>
 <head>
  <meta charset="utf-8" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <style type="text/css">
.navbar-nav > li {
	padding:15px;
}
</style>

<script>
	var table_ = '';
	var group_ = '';
	var email_ = '';
	var name_ = '';
	var level_ = 0;

	$(document).on('click', '.menu', function() {
		table_ = $(this).text();
		alert(table_);
		$.get("table.cgi?table=" + table_ + "&group=" + group_, 
				function(data, status) {
					replace.innerHTML = data;
				});
	});

    function f() {
		var json = {
			id : email.value,
			password : password.value,
			group : msg.value
		};
		replace.innerHTML = 'login';
		$.post("login.cgi", json, function(data, status) {
			if(data != "Login failed") {
				$(".input-group").hide();
				var vs = data.split("\n");
				email_ = vs[0];
				level_ = parseInt(vs[1]);
				group_ = msg.value;
				document.cookie = "id=" + email_;
				document.cookie = "level=" + vs[1];
				for(var i=2; i<vs.length; i++) 
					li.innerHTML += "<li class='nav-item'><a href='#' class='menu'>"+ vs[i] + "</a></li>";
				logged.innerHTML = email_ + "님 반갑습니다.";
			} else replace.innerHTML = data;
		});				
	}

  </script>
  <title>
   토론과 민주적인 의사 결정
  </title>
 </head>
 <body>
<nav class="navbar navbar-inverse bg-primary" >
	<ul id="li" class="navbar-nav"></ul>
</nav>
  <div class="container">
   <div class="row">
    <div class="col-sm-9">
     <div class="jumbotron">
      <h1>
       토론과 민주적인 의사 결정
      </h1>
     </div>
    </div>
    <div class="col-sm-3">
     <p id="logged">
     </p>
     <div class="input-group">
      <span class="input-group-addon">
       Group
      </span>
      <input class="form-control" id="msg" name="msg" placeholder="Additional Info" type="text" />
     </div>
     <div class="input-group">
      <span class="input-group-addon">
       <i class="glyphicon glyphicon-user">
       </i>
      </span>
      <input class="form-control" id="email" name="email" placeholder="Email" type="text" />
     </div>
     <div class="input-group">
      <span class="input-group-addon">
       <i class="glyphicon glyphicon-lock">
       </i>
      </span>
      <input class="form-control" id="password" name="password" placeholder="Password" type="password" />
      <div class="input-group-btn">
       <button class="btn btn-default" onclick="f()">
        <i class="glyphicon glyphicon-log-in">
		</i>
       </button>
      </div>
     </div>
    </div>
   </div>
   <div class="row">
    <div id="replace">
    </div>
   </div>
  </div>
 </body>
</html>
